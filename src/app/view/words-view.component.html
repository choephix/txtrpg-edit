<div class="darkform">
  <div class="item">GAMEDATA / JOURNAL / ACTIONS / GOTO -- (TEXT)</div>
  <div class="item">
    <div class="flex-row">
      <!-- <div class="cell" *ngFor="let field of filter | keyvalue">
        <div><label>{{field.key}}</label></div>
        <div title="{{field.key}}"><input type="text" class="input" [(ngModel)]="field.value"></div>
      </div> -->
      
      <div class="cell" style="flex-grow: 1">
        <div><label>from</label></div>
        <div><input type="text" class="input" [(ngModel)]="filter.from"></div>
      </div>
      <div class="cell" style="flex-grow: 1">
        <div><label>to</label></div>
        <div><input type="text" class="input" [(ngModel)]="filter.to"></div>
      </div>
      <div class="cell" style="flex-grow: 3">
        <div><label>search</label></div>
        <div><input type="text" class="input" [(ngModel)]="filter.search"></div>
      </div>
    </div>
    <div>- Filtering options</div>
  </div>
</div>

<div class="divider" [class.active]="filter.from||filter.to||filter.search"></div>

<div class="darkform items-list" #thelist spellcheck="false">

  <ng-container *ngFor="let o of data; let i = index">
  <ng-container *ngIf="passesFilter(o)">
    <div class="item" (mousedown)="selection.selectObject(o)" [class.selected]="o===selection.selectedObject">

        <div class="flex-row">
          <div class="cell" style="flex-grow: 1">
            <div><label>from</label></div>
            <div><input type="text"
                        class="input field-from" 
                        [(class.dirty)]="o.from!=data_original[i].from"
                        [(ngModel)]="o.from"></div>
          </div>
          <div class="cell" style="flex-grow: 1">
            <div><label>to</label></div>
            <div><input type="text" 
                        class="input field-to"
                        [class.dirty]="o.to!=data_original[i].to"
                        [(ngModel)]="o.to"></div>
          </div>
          <div class="cell" style="flex-grow: 3">
            <div><label>condition</label></div>
            <div><input type="text" 
                        class="input field-condition" 
                        [class.dirty]="o.condition!=data_original[i].condition"
                        [(ngModel)]="o.condition"></div>
          </div>
        </div>

        <div>
          <label for="goto.handle">handle</label>
          <input type="text"
                 class="input field-handle" 
                 [class.dirty]="o.handle!=data_original[i].handle"
                 [(ngModel)]="o.handle">
        </div>

        <div>
          <label for="goto.text">text</label>
          <div class="textarea-wrapper input" [class.dirty]="o.text!=data_original[i].text">
            <textarea autosize 
                      class="input field-text" 
                      (click)="fixTextarea($event.target)"
                      [class.dirty]="o.text!=data_original[i].text"
                      [(ngModel)]="o.text"></textarea>
          </div>
        </div>

        <div class="toolbar">
          <button type="button" (click)="move(o,i,-1)">⬆ move up</button>
          <button type="button" (click)="move(o,i,1)">⬇ move down</button>
          <button type="button" (click)="cloneTo(o,i)">⬆ clone before</button>
          <button type="button" (click)="cloneTo(o,i+1)">⬇ clone after</button>
        </div>

    </div>
  </ng-container>
  </ng-container>

</div>